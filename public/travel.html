<!DOCTYPE html>
<html lang="en">
  <head>
    <title>DailyFinder</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">

    <link rel="stylesheet" href="assets/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/aos.css">
    <link rel="stylesheet" href="assets/css/ionicons.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="assets/css/jquery.timepicker.css">
    <link rel="stylesheet" href="assets/css/flaticon.css">
    <link rel="stylesheet" href="assets/css/icomoon.css">
    <link rel="stylesheet" href="assets/css/style.css">


    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id=' + i + dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MXCSL68');</script>
    <!-- End Google Tag Manager -->
  </head>
  <body>
    
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
      <div class="container">
        <!-- <img class="logo" src="./images/daily-finder-logo2.png" />
        <span class="horizontal-spacer" style="width:2em;"></span> -->
        <a class="navbar-brand" href="/index.html">DailyFinder</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="oi oi-menu"></span> Menu
        </button>

        <div class="collapse navbar-collapse" id="ftco-nav">
          <ul class="navbar-nav ml-auto">
            
            <li class="nav-item active"><a href="/all.html?tags=[health]" class="nav-link">Health</a></li>
            <li class="nav-item"><a href="/all.html?tags=[finance]" class="nav-link">Finance</a></li>
            <li class="nav-item"><a href="/all.html?tags=[travel]" class="nav-link">Travel</a></li>
            <li class="nav-item"><a href="/all.html?tags=[tech]" class="nav-link">Tech</a></li>
            <li class="nav-item"><a href="/all.html?tags=[education]" class="nav-link">Education</a></li>

          </ul>
        </div>
      </div>
    </nav>
    <!-- END nav -->
    

    <section class="ftco-section bg-light">
      <div class="container">
        <div id="content-row" class="row" style="padding-top:4em">
        
        </div>
      </div>
    </section>


    <script type="text/javascript">


      // @chatgpt

      // Here's an example of a JavaScript function that generates random integers between x and y, and ensures that the same integer is not generated twice in a row, with the probability of generating the same integer decreasing over time:

      let previousNumber = null;
      let consecutiveSameNumberCount = 0;

      // In this example, the previousNumber variable keeps track of the previously generated random integer, and the consecutiveSameNumberCount variable keeps track of the number of consecutive times the same integer has been generated. The function first checks if previousNumber is null or consecutiveSameNumberCount is greater than or equal to 2. If so, it generates a new random integer using Math.random() and sets it to previousNumber, while resetting consecutiveSameNumberCount to 0. If previousNumber is not null and consecutiveSameNumberCount is less than 2, it calculates the probability of generating the same number again based on consecutiveSameNumberCount, and uses Math.random() to decide whether to generate the same number or a new random number. The probability of generating the same number decreases over time, as consecutiveSameNumberCount increases.

      function generateRandomInt(x, y) {
        // If previousNumber is null or consecutiveSameNumberCount is greater than or equal to 2,
        // generate a new random number
        if (previousNumber === null || consecutiveSameNumberCount >= 2) {
          previousNumber = Math.floor(Math.random() * (y - x + 1)) + x; // Generate random integer between x and y
          consecutiveSameNumberCount = 0; // Reset consecutiveSameNumberCount
        } else {
          // If previousNumber is not null and consecutiveSameNumberCount is less than 2,
          // calculate the probability of generating the same number again
          const probability = 1 / (consecutiveSameNumberCount + 1);
          const shouldGenerateSameNumber = Math.random() > probability;
          
          if (shouldGenerateSameNumber) {
            // If the probability check passes, generate the same number as before
            consecutiveSameNumberCount++;
          } else {
            // If the probability check fails, generate a new random number
            previousNumber = Math.floor(Math.random() * (y - x + 1)) + x;
            consecutiveSameNumberCount = 0; // Reset consecutiveSameNumberCount
          }
        }
        
        return previousNumber;
      }



        function createArticle(_id, title, text, tags=[]) {

          const article = document.createElement('div');
          article.className = 'col-md-4 ftco-animate fadeInUp ftco-animated'; // @todo: I hardcoded in dateInUp and ftco-animated. It was stopping the image from showing.

          const articleInner = document.createElement('div');
          articleInner.className = 'article-entry';
          articleInner.setAttribute('data-aos-delay', '500');


          const link = document.createElement('a');
          link.href = `all/index.html?_id=${_id}`;
          link.className = 'block-20';
          //link.style.backgroundImage = `url('./all/images/${_id}.jpg')`;

          var img = new Image();
          img.src = `./article-entry/images/${_id}.jpg`;

          img.addEventListener('load', function() {
            link.style.backgroundImage = `url('${img.src}')`;
          });

          // Add an event listener to check when the image fails to load
          img.addEventListener('error', function() {
            // If the image fails to load, set a default background image
            
            // random int between 0 and 19
            const randInt = generateRandomInt(0, 19)

            link.style.backgroundImage = `url('./assets/images/image_${randInt}.jpg')`;
          });

          const textInner = document.createElement('div');
          textInner.className = 'text p-4 d-block';

          const tagList = document.createElement('div');
          tagList.className = 'tags';
          tags.forEach(tag => {
            const tagLink = document.createElement('a');
            tagLink.href = '#';
            tagLink.textContent = tag;
            tagList.appendChild(tagLink);
          });

          const heading = document.createElement('h3');
          heading.className = 'heading';
          const headingAnchor = document.createElement('a');
          headingAnchor.href = `all/index.html?_id=${_id}`;
          headingAnchor.textContent = title;
          heading.appendChild(headingAnchor);

          const readMoreLink = document.createElement('a');
          readMoreLink.href = `all/index.html?_id=${_id}`;
          readMoreLink.textContent = 'Read More';

          textInner.appendChild(tagList);
          textInner.appendChild(heading);
          textInner.appendChild(readMoreLink);

          articleInner.appendChild(link);
          articleInner.appendChild(textInner);

          article.appendChild(articleInner);

          return article
        }


        const hostname = window.location.hostname
        const port = window.location.port

        var queryString = window.location.search;
        // Remove the question mark from the beginning of the query string
        queryString = queryString.slice(1);
        // Split the query string into an array of parameter-value pairs
        var queryParams = queryString.split('&');
        // Create an object to store the query parameters
        var params = {};

        // Loop through each parameter-value pair and add them to the params object
        for (var i = 0; i < queryParams.length; i++) {
          var param = queryParams[i].split('=');
          var key = decodeURIComponent(param[0]);
          var value = decodeURIComponent(param[1]);
          params[key] = value;
        }

        // Now you can access the query parameters as properties of the params object
        console.log(params)


        // for local development: use http://
        const host = (hostname === 'localhost') ? `http://localhost:${port}` : `https://${hostname}:${port}`

        fetch(`${host}/articles?$limit=50`)
        .then(response => response.json())
        .then(resp => {
            resp.data.forEach(article => {
                let res = createArticle(article._id, article.title, article.text, article.tags)
                document.querySelector('#content-row').appendChild(res)
            });
        });
    </script>


    <footer class="ftco-footer ftco-bg-dark ftco-section">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">DailyFinder </h2>
              <p>Find anything any time.</p>
              <br>
              <p class="mt-4"><a href="/contact.html" class="btn btn-primary p-3">Get in touch</a></p>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4 ml-md-5">
              <!--<h2 class="ftco-heading-2">Unseful Links</h2>-->
              <ul class="list-unstyled">
                <li><a href="/about.html" class="py-2 d-block">About</a></li>
                <li><a href="/contact.html" class="py-2 d-block">Contact Us</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
             <div class="ftco-footer-widget mb-4">
              <!--<h2 class="ftco-heading-2">Navigational</h2>-->
              <ul class="list-unstyled">
                <li><a href="/terms-and-conditions.html" class="py-2 d-block">Terms and Conditions</a></li>
                <li><a href="/privacy-policy.html" class="py-2 d-block">Privacy Policy</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
                <!--<li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>-->
              </ul>
            </div>
          </div>
        </div>
      </div>
    </footer>
    
  

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/jquery-migrate-3.0.1.min.js"></script>
  <script src="assets/js/popper.min.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>
  <script src="assets/js/jquery.easing.1.3.js"></script>
  <script src="assets/js/jquery.waypoints.min.js"></script>
  <script src="assets/js/jquery.stellar.min.js"></script>
  <script src="assets/js/owl.carousel.min.js"></script>
  <script src="assets/js/jquery.magnific-popup.min.js"></script>
  <script src="assets/js/aos.js"></script>
  <script src="assets/js/jquery.animateNumber.min.js"></script>
  <script src="assets/js/bootstrap-datepicker.js"></script>
  <script src="assets/js/jquery.timepicker.min.js"></script>
  <script src="assets/js/scrollax.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="assets/js/google-map.js"></script>
  <script src="assets/js/main.js"></script>

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MXCSL68"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
    
  </body>
</html>